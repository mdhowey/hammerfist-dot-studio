---
import { getCollection } from "astro:content";

// Filter blog entries with 'draft: false' & date before current date
const publishedBlogEntries = await getCollection("blog", ({ data }) => {
  return !data.draft && data.publishDate < new Date();
});

// Sort content entries by publication date
publishedBlogEntries.sort(function (a, b) {
  return b.data.publishDate.valueOf() - a.data.publishDate.valueOf();
});

const footerLinks = [
  {
    header: 'Latest Blogs',
    links: [],
  },
];
---

<!-- ====== Footer Section Start -->
<footer
  class="wow fadeInUp relative z-10 bg-primary pt-20 lg:pt-[100px]"
  data-wow-delay=".15s"
>
  <div class="container">
    <div class="-mx-4 my-4 flex flex-col md:flex-row content-center justify-evenly">
      <div class="w-full px-4 sm:w-1/2 md:w-1/2 lg:w-4/12 xl:w-3/12">
        <div class="mb-10 w-full">
          <a
            href="/"
            class="mb-6 inline-block "
          >
            <img
              src="/assets/logo/logo-hero.png"
              alt="logo"
              class="max-w-full"
            />
          </a>
          <p class="mb-8 max-w-[270px] text-base text-gray-7">
            Empowering Small Businesses with Innovative Software Solutions
          </p>
          <div class="-mx-3 flex items-center">
            <a href="https://www.linkedin.com/company/hammerfist-studio-llc/" target="_blank" class="px-3 text-gray-7 hover:text-white">
              <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"
                class="fill-current">
                <path
                  d="M18.8065 1.8335H3.16399C2.42474 1.8335 1.83334 2.42489 1.83334 3.16414V18.8362C1.83334 19.5459 2.42474 20.1668 3.16399 20.1668H18.7473C19.4866 20.1668 20.078 19.5754 20.078 18.8362V3.13457C20.1371 2.42489 19.5457 1.8335 18.8065 1.8335ZM7.24464 17.4168H4.55379V8.69371H7.24464V17.4168ZM5.88443 7.48135C4.99733 7.48135 4.31721 6.77167 4.31721 5.91414C4.31721 5.05661 5.0269 4.34694 5.88443 4.34694C6.74196 4.34694 7.45163 5.05661 7.45163 5.91414C7.45163 6.77167 6.8011 7.48135 5.88443 7.48135ZM17.4463 17.4168H14.7554V13.1883C14.7554 12.183 14.7258 10.8523 13.336 10.8523C11.9167 10.8523 11.7097 11.976 11.7097 13.0996V17.4168H9.01884V8.69371H11.6506V9.90608H11.6801C12.0645 9.1964 12.9221 8.48672 14.2527 8.48672C17.0027 8.48672 17.5054 10.2609 17.5054 12.6856V17.4168H17.4463Z" />
              </svg>
            </a>
          </div>
        </div>
      </div>

      <div class="w-full px-4 md:w-2/3 lg:w-6/12 xl:w-3/12">
        <div class="mb-10 w-full">
          <h4 class="mb-9 text-lg font-semibold text-white">{footerLinks[0].header}</h4>
          <ul class="flex flex-col gap-8">
            {
              publishedBlogEntries.slice(0, 2).map((blogPostEntry, index) => (
                <li>
                  <a class="group flex items-center gap-[22px]" href={`/blog/${blogPostEntry.slug}`}>
                    <div class="overflow-hidden rounded max-w-[70px] w-full max-h-12 h-full">
                      <img
                        src={blogPostEntry.data.image.src}
                        alt={blogPostEntry.data.image.alt}
                      />
                    </div>
                    <span class="max-w-[180px] text-gray-7 text-base group-hover:text-white">
                      {blogPostEntry.data.title.slice(0, 35)} ...
                    </span>
                  </a>
                </li>
              ))
            }
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-12 border-t border-[#8890A4] border-opacity-40 py-8 lg:mt-[60px]">
    <div class="container">
      <div class="-mx-4">
        <div class="w-full px-4">
          <div class="my-1 flex justify-center">
            <p class="text-base text-gray-7">
              Designed and Developed by
              <a
                href="/"
                rel=""
                target="_blank"
                class="text-gray-1 hover:underline"
              >
                Hammerfist Studio, LLC
              </a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
<!-- ====== Footer Section End -->